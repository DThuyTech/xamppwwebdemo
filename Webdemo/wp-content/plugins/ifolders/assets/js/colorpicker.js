!function(c){"use strict";const t=function(){const s=new WeakMap;function o(o,e,i){s.set(this,{type:e?"embed":"popup",$parent:e||c("body"),$container:null,$element:null,selectedColor:o||null,colors:[],callback:i||null}),this._init()}return o.prototype={get VERSION(){return"1.0.0"},_init:function(){var o=s.get(this);this._buildColors(),this._buildDOM(),this._bind(),this._selectColor(o.selectedColor)},_buildDOM:function(){const o=s.get(this);var e='<div><div id="ifs-colorpicker-saved-colors" class="ifs-colorpicker-colors">'+this._renderSavedColors()+'</div><div class="ifs-colorpicker-line"></div><div class="ifs-colorpicker-colors">'+this._renderMainColors()+'</div><div class="ifs-colorpicker-line"></div><div class="ifs-colorpicker-row"><div class="ifs-colorpicker-input-text-wrap"><input class="ifs-colorpicker-input-text" type="text" maxlength="7"><i class="ifs-colorpicker-clear">&times;</i></div><div class="ifs-colorpicker-input-color-wrap"><input class="ifs-colorpicker-input-color" type="color" value="#ffffff"><div class="ifs-colorpicker-preview-wrap"><div class="ifs-colorpicker-preview"></div></div></div><div class="ifs-colorpicker-button ifs-colorpicker-button-submit">OK</div></div></div>';o.$container=c(e).toggleClass("ifs-colorpicker-embed","embed"==o.type).toggleClass("ifs-colorpicker-popup","popup"==o.type),o.$parent.append(o.$container)},_bind:function(){const o=s.get(this);o.$container.on("click",".ifs-colorpicker-colors .ifs-colorpicker-color",this._clickColor.bind(this)),o.$container.on("dblclick",".ifs-colorpicker-colors .ifs-colorpicker-color",this._dblclickColor.bind(this)),o.$container.on("click",".ifs-colorpicker-clear",this._clearColor.bind(this)),o.$container.on("click",".ifs-colorpicker-button-submit",this._submit.bind(this)),o.$container.find(".ifs-colorpicker-input-text").on("input",this._setColorFromInput.bind(this)),o.$container.find(".ifs-colorpicker-input-color").on("input",this._setColorFromPreview.bind(this)),c(window).on("resize",this._resize.bind(this)),document.addEventListener("mousedown",this._mousedown.bind(this),{capture:!0})},_renderMainColors:function(){var e=s.get(this);let i="";for(let o=0;o<3;o++){i+='<div class="ifs-colorpicker-row">';for(const c of e.colors[o])i+='<div class="ifs-colorpicker-color" data-color="'+c+'" style="background-color:'+c+'"></div>';i+="</div>"}return i},_renderSavedColors:function(){var o=s.get(this),e=Cookies.get("ifs-colorpicker-colors")?JSON.parse(Cookies.get("ifs-colorpicker-colors")):[null,null,null,null,null];let i="";i+='<div class="ifs-colorpicker-row"><div class="ifs-colorpicker-color ifs-colorpicker-color-save" title="add to pallete"></div>';for(const t in o.colors[3]){var c=e[t]||o.colors[3][t];i+='<div class="ifs-colorpicker-color" data-color="'+c+'" style="background-color:'+c+'"></div>'}return i+="</div>"},_buildColors:function(){const o=s.get(this);o.colors.push(["#e49086","#f2b78f","#fde7ab","#cddf7b","#8fcaf2","#db96d9"]),o.colors.push(["#d35141","#e98746","#fbd25e","#b3cf3c","#46a8e9","#c65bbb"]),o.colors.push(["#aa2b22","#c85f19","#fabc0f","#819526","#1981c8","#9d3aa7"]),o.colors.push(["#000000","#222222","#444444","#666666","#888888"])},_show:function(o){const e=s.get(this);e.$element=c(o.currentTarget),this._place(e.$element),this._selectColor(this.get(e.$element)),e.$container.find("#ifs-colorpicker-saved-colors").empty().append(this._renderSavedColors()),e.$container.addClass("ifs-active")},_close:function(){const o=s.get(this);o.$element=null,o.$container.removeClass("ifs-active")},_mousedown:function(o){const e=s.get(this);!e.$element||e.$element.is(o.target)||e.$container.is(o.target)||e.$container.find(o.target).length||this._close()},_place:function(o){const e=s.get(this);var i=document.documentElement,c=(window.scrollX||i.scrollLeft)-(i.clientLeft||0),i=(window.scrollY||i.scrollTop)-(i.clientTop||0),t=o.offset();const r=t.top-i,l=t.left-c;i=o.outerHeight(!1);e.$container.css({top:r+i+6,left:l-3})},_resize:function(){var o=s.get(this);o.$element&&this._place(o.$element)},_selectColor:function(o){const e=s.get(this);o&&0!=o.length?(e.selectedColor=o,c(".ifs-colorpicker-input-text",e.$container).val(o),c(".ifs-colorpicker-input-color",e.$container).val(o),c(".ifs-colorpicker-preview",e.$container).css({background:o||""})):(e.selectedColor=null,c(".ifs-colorpicker-input-text",e.$container).val(""),c(".ifs-colorpicker-input-color",e.$container).val("#ffffff"),c(".ifs-colorpicker-preview",e.$container).css({background:""}))},_clearColor:function(){this._selectColor()},_saveColor:function(){const o=s.get(this);if(o.selectedColor){const e=Cookies.get("ifs-colorpicker-colors")?JSON.parse(Cookies.get("ifs-colorpicker-colors")):[null,null,null,null,null,null];if(e[0]!==o.selectedColor){for(let o=e.length-1;0<o;o--)e[o]=e[o-1];e[0]=o.selectedColor,Cookies.set("ifs-colorpicker-colors",JSON.stringify(e))}o.$container.find("#ifs-colorpicker-saved-colors").html(this._renderSavedColors())}},_clickColor:function(o){const e=c(o.currentTarget);e.hasClass("ifs-colorpicker-color-save")?this._saveColor():this._selectColor(c(o.currentTarget).attr("data-color"))},_dblclickColor:function(o){const e=c(o.currentTarget);e.hasClass("ifs-colorpicker-color-save")||(this._selectColor(c(o.currentTarget).attr("data-color")),this._submit())},_setColorFromInput:function(o){const e=s.get(this);e.selectedColor=c(".ifs-colorpicker-input-text",e.$container).val(),"#"!=e.selectedColor[0]&&(e.selectedColor="#"+e.selectedColor,c(".ifs-colorpicker-input-text",e.$container).val(e.selectedColor)),0<e.selectedColor.length?(c(".ifs-colorpicker-input-color",e.$container).val(e.selectedColor),c(".ifs-colorpicker-preview",e.$container).css({background:e.selectedColor||""})):(c(".ifs-colorpicker-input-color",e.$container).val("#fff"),c(".ifs-colorpicker-preview",e.$container).css({background:""}))},_setColorFromPreview:function(o){this._selectColor(o.target.value)},_submit:function(){const o=s.get(this);o.$element?o.$element.attr({"data-color":o.selectedColor}).css({background:o.selectedColor||""}).trigger("color",o.selectedColor):o.callback&&"function"==typeof o.callback&&o.callback.call(null,o.selectedColor),this._close()},set:function(o,e){s.get(this);o.data("colorpicker")||o.on("click",this._show.bind(this)),o.data({colorpicker:!0}).attr({"data-color":e||null}).css({background:e||""})},get:function(o){if(o.data("colorpicker")){const e=o.attr("data-color");return e?e.toUpperCase():null}return null}},o}();window.IFOLDERS=window.IFOLDERS||{},window.IFOLDERS.PLUGINS=window.IFOLDERS.PLUGINS||{},window.IFOLDERS.PLUGINS.COLORPICKER=function(o,e,i){return new t(o,e,i)}}(jQuery);